# SIM SFC Model - Godley & Lavoie Chapter 3
# This file demonstrates the SFCR-compatible text format for CircuitJS1
# Based on: Monetary Economics: An Integrated Approach to Credit, Money, Income, Production and Wealth
# by Wynne Godley and Marc Lavoie, chapter 3, figures 3.2 and 3.3.

#===============================================================================
# BALANCE SHEET MATRIX
#===============================================================================

@matrix Balance_Sheet
columns: Households_b, Production_b, Government_b
codes: h, p, g
type: balance_sheet

| Stock           | h           | p           | g           |
|-----------------|-------------|-------------|-------------|
| Money stock     | H_h         |             | -H_s        |

@end_matrix


#===============================================================================
# TRANSACTION FLOW MATRIX
#===============================================================================

@matrix Transaction_Flow_Matrix
columns: Households, Production, Govt
codes: h, p, g
type: transaction_flow

| Flow              | h           | p           | g           |
|-------------------|-------------|-------------|-------------|
| Consumption       | -C_d        | C_s         |             |
| Govt Expenditures |             | G_s         | -G_d        |
| Wages             | W * N_s     | -W * N_s    |             |
| Taxes             | -T_s        |             | T_d         |
| Money stock       | -\DeltaH_h  |             | \DeltaH_s   |

@end_matrix


#===============================================================================
# EQUATIONS (Block 1)
#===============================================================================

@equations equations_1
  C_s ~ C_d                           # Supply = Demand identity
  G_s ~ G_d                           # Govt supply = demand  
  T_s ~ T_d                           # Tax identity
  N_s ~ N_d                           # Labor market clearing
  YD ~ W * N_s - T_s                  # Disposable income
  T_d ~ \theta * W * N_s              # Tax collection
  C_d ~ \alpha_1 * YD + \alpha_2 * H_h    # Consumption function
  H_s ~ integrate(G_d - T_d)          # Govt money stock (cumulative deficit)
@end


#===============================================================================
# EQUATIONS (Block 2)
#===============================================================================

@equations equations_2
  H_h ~ integrate(YD - C_d)           # Household money holdings (savings)
  Y ~ C_s + G_s                       # Total output (GDP)
  N_d ~ Y / W                         # Labor demand
  \DeltaH_h ~ diff(H_h)               # Change in household money
  \DeltaH_s ~ diff(H_s)               # Change in govt money
@end


#===============================================================================
# PARAMETERS (Exogenous Variables)
#===============================================================================

@parameters Parameters
  \alpha_1 = 0.6                      # Propensity to consume out of income
  \alpha_2 = 0.4                      # Propensity to consume out of wealth
  \theta = 0.2                        # Tax rate
  G_d = 20                            # Government demand for goods/services
  W = 1                               # Nominal wage rate
@end


#===============================================================================
# HINTS (Variable Documentation)
#===============================================================================

@hints
  Y: Output
  C_d: Consumption goods Supply/Demand
  C_s: Consumption goods Supply/Demand
  G_s: Services supplied to / demand by Govt
  T_s: Tax
  N_s: Supply/Demand for labour
  YD: Disposable Income
  T_d: Tax
  N_d: Supply/Demand for labour
  G_d: Government demand for services
  W: Nominal Wages Rate
  H_s: Cash money, supplied by the central bank
  H_h: Cash money held by households
  \alpha_1: Propensity to Spend Income
  \alpha_2: Propensity to Spend Wealth
  \theta: Tax Rate
  \DeltaH_h: Change in household money holdings
  \DeltaH_s: Change in government money supply
@end


#===============================================================================
# SCOPES (Variables to display in oscilloscope)
#===============================================================================

@scope C_s
@scope Y
@scope \DeltaH_h
@scope \DeltaH_s
